# Désactiver l'affichage du contenu du répertoire
Options +Indexes

# Désactiver l'exécution des scripts PHP dans certains répertoires
<FilesMatch "\.(php|php\.)$">
  SetHandler none
</FilesMatch>

# Activer la réécriture d'URL
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # Rediriger vers HTTPS
  RewriteCond %{HTTPS} off
  RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # Supprimer www du domaine
  RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
  RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

  # Rediriger vers le fichier index.html pour les applications Angular
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ index.html [L]
</IfModule>

# Activer la compression Gzip
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/plain
  AddOutputFilterByType DEFLATE text/html
  AddOutputFilterByType DEFLATE text/xml
  AddOutputFilterByType DEFLATE text/css
  AddOutputFilterByType DEFLATE application/xml
  AddOutputFilterByType DEFLATE application/xhtml+xml
  AddOutputFilterByType DEFLATE application/rss+xml
  AddOutputFilterByType DEFLATE application/javascript
  AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>

# Bloquer l'accès à certains fichiers sensibles
<FilesMatch "(^\.|\.md|\.sh|composer\.json|composer\.lock|CONTRIBUTING\.md|README\.md|readme\.txt)">
  Order allow,deny
  Deny from all
  Satisfy All
</FilesMatch>
